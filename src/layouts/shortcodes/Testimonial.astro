---
/**
 * Example Usage

  <Testimonial
    customerImage="/images/customers/avatar/1.jpg"
    customerName="Sarah Jones"
    customerRole="CEO, Founder"
    customerCompanyLogo="/images/customers/company-logo/acme.png"
    customerCompanyName="Acme Inc."
  >
    Our partnership with Folex demonstrates the power of a well-executed customer
    engagement strategy. By integrating advanced technologies and data-driven
    insights, we helped them achieve a more personalized, consistent, and
    rewarding customer experience. At Folex, we are committed to helping
    businesses like Oloyon revolutionize their customer engagement and drive
    long-term success.
  </Testimonial>

 */
import { markdownify } from "@/lib/utils/textConverter";
import OptimizedImage from "@/components/utilities/OptimizedImage.astro";
import ReactIcon from "@/helpers/ReactIcons.astro";

interface Props {
  class?: string;
  customerImage?: string;
  customerName?: string;
  customerRole?: string;
  customerCompanyLogo?: string;
  customerCompanyName?: string;
}

const {
  class: className,
  customerImage,
  customerName,
  customerRole,
  customerCompanyLogo,
  customerCompanyName,
} = Astro.props;

let rating = new Array(5).fill(null);
---

<div
  class:list={[
    "testimonial-component border-light not-prose relative flex w-full border p-6 " +
      className,
  ]}>
  <OptimizedImage
    inlineSvg={true}
    class="text-primary/35 pointer-events-none absolute top-0 start-0 h-56 w-48"
    width={119}
    height={224}
    src="/images/testimonial/review-pattern.svg"
    perspective="none"
    alt="pattern"
  />
  <div class="flex flex-col justify-between space-y-8">
    <div class="space-y-8 md:space-y-16">
      {
        customerCompanyName && (
          <div class="flex flex-wrap-reverse items-center justify-between gap-3 opacity-70">
            <div class="flex items-center gap-2">
              {customerCompanyLogo && (
                <OptimizedImage
                  class="w-6"
                  height={24}
                  layout={"full-width"}
                  src={customerCompanyLogo}
                  alt={customerCompanyName}
                />
              )}
              {customerCompanyName && (
                <div
                  class="text-dark whitespace-nowrap"
                  set:html={markdownify(customerCompanyName)}
                />
              )}
            </div>
          </div>
        )
      }
      <div class="prose-styles">
        <slot />
      </div>
    </div>
    {
      customerName && (
        <div class="flex flex-wrap-reverse items-center justify-between gap-x-2 gap-y-10">
          <div class="flex items-center gap-4">
            {customerImage && (
              <OptimizedImage
                class="h-12 w-12 rounded-full"
                width={48}
                height={48}
                src={customerImage}
                alt={customerName}
              />
            )}
            <div>
              {customerName && (
                <div class="text-dark" set:html={markdownify(customerName)} />
              )}
              {customerRole && (
                <p class="text-sm" set:html={markdownify(customerRole)} />
              )}
            </div>
          </div>
          <div class="flex items-center gap-2 rounded-full bg-white px-3 py-1.5">
            {rating.map(() => (
              <ReactIcon icon="IoIosStar" class="text-yellow-500" />
            ))}
          </div>
        </div>
      )
    }
  </div>
</div>
