---
import SEO from "@/components/seo/Seo.astro";
import OpenGraph from "@/components/seo/OpenGraph.astro";
import Favicons from "@/components/seo/Favicons.astro";
import parseTomlToJson from "@/lib/utils/parseTomlToJson.ts";
import JsonLD from "../widgets/JsonLD.astro";
import Font from "../widgets/Font.astro";

const config = parseTomlToJson("./src/config/config.toml");
---

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Language" content={Astro.currentLocale} />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=5"
  />
  <SEO {...Astro.props} />
  <meta
    name="theme-color"
    media="(prefers-color-scheme: light)"
    content={"#fff"}
  />
  <meta
    name="theme-color"
    media="(prefers-color-scheme: dark)"
    content="#000"
  />
  <meta name="generator" content={Astro.generator} />
  {config.head?.content && <Fragment set:html={config.head?.content} />}
  <OpenGraph {...Astro.props} />
  <Favicons />
  <JsonLD
    content={{
      ...Astro.props,
    }}
  />

  <!------------------------ Google Fonts ------------------------>
  <Font />
  <script is:inline>
    function initApollo() {
      var n = Math.random().toString(36).substring(7),
        o = document.createElement("script");
      ((o.src =
        "https://assets.apollo.io/micro/website-tracker/tracker.iife.js?nocache=" +
        n),
        (o.async = !0),
        (o.defer = !0),
        (o.onload = function () {
          window.trackingFunctions.onLoad({
            appId: "68e677a6f5e6ec001d41b6ed",
          });
        }),
        document.head.appendChild(o));
    }
    initApollo();
  </script>
</head>
